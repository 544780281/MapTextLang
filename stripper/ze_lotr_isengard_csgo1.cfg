//add display text 
add:
{
    "origin" "-9025 -8376 -9933"
    "y" "0.38"
    "x" "0.02"
    "targetname" "gandalf_text"
    "spawnflags" "0"
    "message" "Light - Ready"
    "holdtime" "3"
    "fxtime" "0.25"
    "fadeout" "0"
    "fadein" "0"
    "effect" "0"
    "color2" "128 255 255"
    "color" "0 255 255"
    "channel" "0"
    "classname" "game_text"
}

//add script variables
add:
{
    "origin" "-9025 -8376 -9943"
    "targetname" "var_spawn"
    "StartDisabled" "0"
    "spawnflags" "0"
    "classname" "logic_relay"
    connections
    {
    "OnSpawn" "!selfRunScriptCode::bxzl_gandalf_text <-'g'.tochar()+'a'.tochar()+'n'.tochar()+'d'.tochar()+'a'.tochar()+'l'.tochar()+'f'.tochar()+'_'.tochar()+'t'.tochar()+'e'.tochar()+'x'.tochar()+'t'.tochar()0-1"
    "OnSpawn" "!selfRunScriptCode::bxzl_SetText <-'S'.tochar()+'e'.tochar()+'t'.tochar()+'T'.tochar()+'e'.tochar()+'x'.tochar()+'t'.tochar()0-1"
    "OnSpawn" "!selfRunScriptCode::bxzl_Disable <-'D'.tochar()+'i'.tochar()+'s'.tochar()+'a'.tochar()+'b'.tochar()+'l'.tochar()+'e'.tochar()0-1"
    "OnSpawn" "!selfRunScriptCode::bxzl_lr <-'L'.tochar()+'i'.tochar()+'g'.tochar()+'h'.tochar()+'t'.tochar()+' '.tochar()+'-'.tochar()+' '.tochar()+'R'.tochar()+'e'.tochar()+'a'.tochar()+'d'.tochar()+'y'.tochar()0-1"
    "OnSpawn" "!selfRunScriptCode::bxzl_pr <-'P'.tochar()+'u'.tochar()+'s'.tochar()+'h'.tochar()+' '.tochar()+'-'.tochar()+' '.tochar()+'R'.tochar()+'e'.tochar()+'a'.tochar()+'d'.tochar()+'y'.tochar()0-1"
    "OnSpawn" "!selfRunScriptCode::bxzl_light <- 590-1"
    "OnSpawn" "!selfRunScriptCode::bxzl_push <- 890-1"
    "OnSpawn" "!selfRunScriptCode::bxzl_X0 <- null0-1"
    "OnSpawn" "!selfRunScriptCode::bxzl_X1 <- null0-1"
    }
}


//add gandalf's light and push cooldown display 
add:
{
    "origin" "-9025 -8376 -9953"
    "UseRandomTime" "0"
    "targetname" "light_timer"
    "StartDisabled" "1"
    "spawnflags" "0"
    "RefireTime" "1"
    "classname" "logic_timer"
    connections
    {
    "OnTimer" "!selfRunScriptCodeif(bxzl_light > 0)bxzl_light = bxzl_light - 1;0-1"
    "OnTimer" "light_relayTrigger0.01-1"
    "OnTimer" "!selfRunScriptCodeif(bxzl_light == 0)EntFire(self,bxzl_Disable,0,0);0.01-1"
    }
}
add:
{
    "origin" "-9025 -8376 -9963"
    "targetname" "light_relay"
    "StartDisabled" "0"
    "spawnflags" "0"
    "classname" "logic_relay"
    connections
    {
    "OnTrigger" "!selfRunScriptCodebxzl_X0 = 'L'.tochar()+'i'.tochar()+'g'.tochar()+'h'.tochar()+'t'.tochar()+' '.tochar()+'-'.tochar()+' '.tochar()+bxzl_light.tostring()+'S'.tochar()0-1"             
    "OnTrigger" "!selfRunScriptCodeif(bxzl_light > 0)EntFire(bxzl_gandalf_text,bxzl_SetText,bxzl_X0.tostring,0.02);0-1"
    "OnTrigger" "!selfRunScriptCodeif(bxzl_light == 0)EntFire(bxzl_gandalf_text,bxzl_SetText,bxzl_lr.tostring,0.02);0-1"
    }
}
add:
{
    "origin" "-9025 -8376 -9973"
    "UseRandomTime" "0"
    "targetname" "push_timer"
    "StartDisabled" "1"
    "spawnflags" "0"
    "RefireTime" "1"
    "classname" "logic_timer"
    connections
    {
    "OnTimer" "!selfRunScriptCodeif(bxzl_push > 0)bxzl_push = bxzl_push - 1;0-1"
    "OnTimer" "push_relayTrigger0.01-1"
    "OnTimer" "!selfRunScriptCodeif(bxzl_push == 0)EntFire(self,bxzl_Disable,0,0);0.01-1"
    }
}
add:
{
    "origin" "-9025 -8376 -9983"
    "targetname" "push_relay"
    "StartDisabled" "0"
    "spawnflags" "0"
    "classname" "logic_relay"
    connections
    {
    "OnTrigger" "!selfRunScriptCodebxzl_X1 = 'P'.tochar()+'u'.tochar()+'s'.tochar()+'h'.tochar()+' '.tochar()+'-'.tochar()+' '.tochar()+bxzl_push.tostring()+'S'.tochar()0-1"
    "OnTrigger" "!selfRunScriptCodeif(bxzl_push > 0)EntFire(bxzl_gandalf_text,bxzl_SetText,bxzl_X1.tostring,0.02);0-1"
    "OnTrigger" "!selfRunScriptCodeif(bxzl_push == 0)EntFire(bxzl_gandalf_text,bxzl_SetText,bxzl_pr.tostring,0.02);0-1"
    }
}    
add:
{
    "origin" "-9025 -8376 -9993"
    "targetname" "item_gandalf_counter"
    "startvalue" "1"
    "StartDisabled" "0"
    "min" "0"
    "max" "3"
    "classname" "math_counter"
    connections
    {
    "OnGetValue" "item_gandalf_use_caseInValue0-1"
    "OnHitMax" "!selfSetValue10-1"
    "OutValue" "item_gandalf_caseInValue0-1"
    "OnHitMin" "!selfSetValue20-1"
    }
}
add:
{
    "origin" "-9025 -8376 -9923"
    "UseRandomTime" "0"
    "targetname" "display_timer"
    "StartDisabled" "1"
    "spawnflags" "0"
    "RefireTime" "1"
    "classname" "logic_timer"
    connections
    {
    "OnTimer" "gandalf_textDisplay0-1"
    }
}
add:
{
    "origin" "-9025 -8376 -9913"
    "targetname" "item_gandalf_case"
    "Case02" "2"
    "Case01" "1"
    "classname" "logic_case"
    connections
    {
    "OnCase01" "push_relayDisable0-1"
    "OnCase01" "light_relayEnable0-1"
    "OnCase01" "light_relayTrigger0.01-1"
    "OnCase01" "gandalf_textDisplay0.02-1"
    "OnCase02" "light_relayDisable0-1"
    "OnCase02" "push_relayEnable0-1"
    "OnCase02" "push_relayTrigger0.01-1"
    "OnCase02" "gandalf_textDisplay0.02-1"
    }
}
add:
{
    "origin" "-9025 -8376 -9903"
    "targetname" "item_gandalf_use_case"
    "classname" "logic_case"
    connections
    {
    "OnCase01" "attack1_gandalfTrigger0-1"
    "OnCase02" "attack2_gandalfTrigger0-1"        
    }
}
